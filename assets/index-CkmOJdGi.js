(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}})();const m=s=>Array.from({length:s},()=>Math.floor(Math.random()*1025)+1),p=async(s,r)=>{const n=[];for(let o of r)try{const e=await fetch(`${s}${o}`);if(!e.ok)throw new Error("Failed to load a Pokemon");const t=await e.json();n.push(t)}catch(e){return console.warn(e.message),null}return n},d=async(s,r,n)=>{r.innerHTML="",(await p(s,n)).forEach(e=>{const t=document.createElement("li");t.id=e.id;const c=document.createElement("img"),a=document.createElement("h2");c.src=e.sprites.front_default,a.textContent=e.name,t.append(c,a),r.append(t)})},f=async s=>{s.preventDefault();const r=new FormData(s.target),n=Object.fromEntries(r);console.log(n);const o=await g(n.pokemon),e=document.querySelector("#pokemon-list");if(e.innerHTML="",o[0]){const t=o[0],c=document.createElement("li");c.id=t.id,console.log(t.id,"pokemon.id");const a=document.createElement("img"),i=document.createElement("h2");a.src=t.sprites.front_default,i.textContent=t.name,c.append(a,i),e.append(c);const l=s.target.closest("LI");if(l){const u=l.id;window.location.href=`pokemon.html?id=${u}`}}else{const t=document.createElement("p");t.textContent="Pokemon not found",e.append(t)}s.target.reset()},g=async s=>{const n=`https://pokeapi.co/api/v2/pokemon/${s}`;console.log(`Fetching: ${n}`);try{const o=await fetch(n);if(!o.ok)throw new Error("Error parsing JSON");return[await o.json(),null]}catch(o){return console.warn(o.message),[null,o]}};async function h(s){const r="https://pokeapi.co/api/v2/pokemon/",n=document.querySelector("#pokemon-list");let o=JSON.parse(localStorage.getItem("randomList"))||m(20);document.querySelector("#random-pokemon").addEventListener("click",()=>{o=m(20),localStorage.setItem("randomList",JSON.stringify(o)),d(r,n,o)}),n.addEventListener("click",e=>{const t=e.target.closest("LI");if(t){const c=t.id;window.location.href=`pokemon.html?id=${c}`}}),document.querySelector("form").addEventListener("submit",f),localStorage.setItem("randomList",JSON.stringify(o)),document.addEventListener("DOMContentLoaded",()=>{d(r,n,o)})}document.querySelector("main");h();
