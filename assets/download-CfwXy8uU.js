import{g as l,f as d}from"./render-functions-nmpT15OQ.js";const u=async n=>{n.preventDefault();const s=new FormData(n.target),o=Object.fromEntries(s);console.log(o);const e=await f(o.pokemon),r=document.querySelector("#pokemon-list");if(r.innerHTML="",e[0]){const t=e[0],c=document.createElement("li");c.id=t.id,console.log(t.id,"pokemon.id");const a=document.createElement("img"),i=document.createElement("h2");a.src=t.sprites.front_default,i.textContent=t.name,c.append(a,i),r.append(c);const m=n.target.closest("LI");if(m){const p=m.id;window.location.href=`pokemon.html?id=${p}`}}else{const t=document.createElement("p");t.textContent="Pokemon not found",r.append(t)}n.target.reset()},f=async n=>{const o=`https://pokeapi.co/api/v2/pokemon/${n}`;console.log(`Fetching: ${o}`);try{const e=await fetch(o);if(!e.ok)throw new Error("Error parsing JSON");return[await e.json(),null]}catch(e){return console.warn(e.message),[null,e]}};async function k(n){const s="https://pokeapi.co/api/v2/pokemon/",o=document.querySelector("#pokemon-list");let e=JSON.parse(localStorage.getItem("randomList"))||l(20);document.querySelector("#random-pokemon").addEventListener("click",()=>{e=l(20),localStorage.setItem("randomList",JSON.stringify(e)),d(s,o,e)}),o.addEventListener("click",r=>{const t=r.target.closest("LI");if(t){const c=t.id;window.location.href=`pokemon.html?id=${c}`}}),document.querySelector("form").addEventListener("submit",u),localStorage.setItem("randomList",JSON.stringify(e)),document.addEventListener("DOMContentLoaded",()=>{d(s,o,e)})}document.querySelector("main");k();
